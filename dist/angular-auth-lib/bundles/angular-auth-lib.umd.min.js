!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/common/http"),require("rxjs/operators"),require("@angular/router"),require("@ngrx/store"),require("@angular/forms"),require("lodash"),require("@angular/material/dialog"),require("@angular/common"),require("@angular/material/input"),require("@angular/material/card"),require("@angular/material/button"),require("@angular/material/progress-spinner"),require("@angular/platform-browser/animations"),require("@ngrx/effects"),require("ngx-toastr"),require("rxjs")):"function"==typeof define&&define.amd?define("angular-auth-lib",["exports","@angular/core","@angular/common/http","rxjs/operators","@angular/router","@ngrx/store","@angular/forms","lodash","@angular/material/dialog","@angular/common","@angular/material/input","@angular/material/card","@angular/material/button","@angular/material/progress-spinner","@angular/platform-browser/animations","@ngrx/effects","ngx-toastr","rxjs"],e):e((t=t||self)["angular-auth-lib"]={},t.ng.core,t.ng.common.http,t.rxjs.operators,t.ng.router,t["@ngrx/store"],t.ng.forms,t.lodash,t.ng.material.dialog,t.ng.common,t.ng.material.input,t.ng.material.card,t.ng.material.button,t.ng.material.progressSpinner,t.ng.platformBrowser.animations,t["@ngrx/effects"],t["ngx-toastr"],t.rxjs)}(this,(function(t,e,o,r,n,s,i,a,u,c,l,p,d,h,f,m,g,S){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */var A=function(){return(A=Object.assign||function(t){for(var e,o=1,r=arguments.length;o<r;o++)for(var n in e=arguments[o])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)};function T(t,e,o,r){var n,s=arguments.length,i=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,r);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(i=(s<3?n(i):s>3?n(e,o,i):n(e,o))||i);return s>3&&i&&Object.defineProperty(e,o,i),i}function _(t,e){return function(o,r){e(o,r,t)}}function I(t,e){var o="function"==typeof Symbol&&t[Symbol.iterator];if(!o)return t;var r,n,s=o.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(r=s.next()).done;)i.push(r.value)}catch(t){n={error:t}}finally{try{r&&!r.done&&(o=s.return)&&o.call(s)}finally{if(n)throw n.error}}return i}var P,y=new e.InjectionToken("Auth api related urls"),U=new e.InjectionToken("Images urls"),C=new e.InjectionToken("Traductions"),E=new e.InjectionToken("Reset actions"),O=new e.InjectionToken("Styling"),N=function(){function t(t,e){this.apiUrls=t,this.http=e}return t.prototype.decodeToken=function(t){var e=t.split(/\./),o=JSON.parse(window.atob(e[1]));return{token:t,expiringDate:new Date(1e3*o.exp)}},t.prototype.getToken=function(){var t=sessionStorage.getItem("token");return t?this.decodeToken(t):null},t.prototype.getAccessToken=function(t){var e=this,o={username:t.username,password:t.password};return this.http.post(this.apiUrls.accessTokenUrl,o).pipe(r.map((function(t){return e.decodeToken(t.access)})))},t.prototype.getRefreshToken=function(t){var e=this,o={refresh:t.token};return this.http.post(this.apiUrls.refreshTokenUrl,o).pipe(r.map((function(t){return e.decodeToken(t.access)})))},t.prototype.login=function(t){return this.getAccessToken(t).pipe(r.map((function(e){return A(A({},t),{token:e})})))},t.prototype.getUserInformation=function(){return this.http.get(this.apiUrls.userInformationUrl).pipe(r.map((function(t){return{usersList:t.usersList,user:A(A({},t.user),{dateJoined:new Date(t.user.dateJoined)})}})))},t.prototype.changePassword=function(t){return this.http.put(this.apiUrls.changePasswordUrl,t)},t.prototype.sendPassword=function(t){return this.http.post(this.apiUrls.sendBackPasswordUrl,{email:t})},t.prototype.createUser=function(t){return this.http.post(this.apiUrls.signUpUrl,t)},t.ctorParameters=function(){return[{type:void 0,decorators:[{type:e.Inject,args:[y]}]},{type:o.HttpClient}]},t.ɵprov=e.ɵɵdefineInjectable({factory:function(){return new t(e.ɵɵinject(y),e.ɵɵinject(o.HttpClient))},token:t,providedIn:"root"}),t=T([e.Injectable({providedIn:"root"}),_(0,e.Inject(y))],t)}(),w=s.createFeatureSelector("auth"),v=function(t){return t.isAuthenticated},b=s.createSelector(w,v),L=function(t){return t.error},R=s.createSelector(w,L),F=function(t){return t.user},D=s.createSelector(w,F),H=function(t){return t.isPasswordBeingChanged},x=s.createSelector(w,H),k=function(t){return t.usersList},j=s.createSelector(w,k),G=function(){function t(t,e){this.store=t,this.router=e}return t.prototype.canActivate=function(t,e){var o=this;return this.store.pipe(s.select(D),r.withLatestFrom(this.store.pipe(s.select(b))),r.map((function(r){var n=I(r,2),s=n[0],i=n[1];return!!(s&&s.allowedUrls.includes(t.routeConfig.path)&&i)||(s&&s.allowedUrls.includes(t.routeConfig.path)&&sessionStorage.setItem("redirectedUrlAfterLogIn",e.url),o.router.navigate(["log-in"]),!1)})))},t.ctorParameters=function(){return[{type:s.Store},{type:n.Router}]},t.ɵprov=e.ɵɵdefineInjectable({factory:function(){return new t(e.ɵɵinject(s.Store),e.ɵɵinject(n.Router))},token:t,providedIn:"root"}),t=T([e.Injectable({providedIn:"root"})],t)}(),Y=function(){function t(t){this.authService=t}return t.prototype.intercept=function(t,e){var o=this.authService.getToken();return o&&(t=t.clone({setHeaders:{Authorization:"Bearer "+o.token}})),e.handle(t)},t.ctorParameters=function(){return[{type:N}]},t=T([e.Injectable()],t)}();(P=t.AUTH_ACTIONS_TYPE||(t.AUTH_ACTIONS_TYPE={})).OPEN_SIGN_UP_DIALOG="[Auth] User wants to sign up",P.SIGN_UP="[Auth] User tries to sign up",P.SIGN_UP_SUCCESS="[Auth] Sign up success",P.SIGN_UP_FAILURE="[Auth] Sign up failure",P.LOG_IN="[Auth] User tries to log in",P.LOG_IN_SUCCESS="[Auth] Log in success",P.LOG_IN_FAILURE="[Auth] Log in failure",P.LOG_OUT="[Auth] User logs out",P.LOAD_USER_INFORMATION="[Auth] Loading of user information",P.LOAD_USER_INFORMATION_SUCCESS="[Auth] Loading of user information success",P.LOAD_USER_INFORMATION_FAILURE="[Auth] Loading of user information failure",P.CHANGE_PASSWORD="[Auth] User changes his password",P.CHANGE_PASSWORD_SUCCESS="[Auth] Password change success",P.CHANGE_PASSWORD_FAILURE="[Auth] Password change failure",P.OPEN_FORGOTTEN_PASSWORD_DIALOG="[Auth] User opens dialog for password resetting",P.SEND_PASSWORD="[Auth] User has asked for having back a new password",P.SEND_PASSWORD_SUCCESS="[Auth] User has received his password",P.SEND_PASSWORD_FAILURE="[Auth] Error in the process of sending the password to the user";var B=function(){this.type=t.AUTH_ACTIONS_TYPE.OPEN_SIGN_UP_DIALOG},M=function(e){this.payload=e,this.type=t.AUTH_ACTIONS_TYPE.SIGN_UP},$=function(){this.type=t.AUTH_ACTIONS_TYPE.SIGN_UP_SUCCESS},W=function(e){this.payload=e,this.type=t.AUTH_ACTIONS_TYPE.SIGN_UP_FAILURE},q=function(e){this.payload=e,this.type=t.AUTH_ACTIONS_TYPE.LOG_IN},V=function(e){this.payload=e,this.type=t.AUTH_ACTIONS_TYPE.LOG_IN_SUCCESS},z=function(e){this.payload=e,this.type=t.AUTH_ACTIONS_TYPE.LOG_IN_FAILURE},J=function(){this.type=t.AUTH_ACTIONS_TYPE.LOG_OUT},K=function(){this.type=t.AUTH_ACTIONS_TYPE.LOAD_USER_INFORMATION},Q=function(e){this.payload=e,this.type=t.AUTH_ACTIONS_TYPE.LOAD_USER_INFORMATION_SUCCESS},X=function(e){this.payload=e,this.type=t.AUTH_ACTIONS_TYPE.LOAD_USER_INFORMATION_FAILURE},Z=function(e){this.payload=e,this.type=t.AUTH_ACTIONS_TYPE.CHANGE_PASSWORD},tt=function(){this.type=t.AUTH_ACTIONS_TYPE.CHANGE_PASSWORD_SUCCESS},et=function(e){this.payload=e,this.type=t.AUTH_ACTIONS_TYPE.CHANGE_PASSWORD_FAILURE},ot=function(){this.type=t.AUTH_ACTIONS_TYPE.OPEN_FORGOTTEN_PASSWORD_DIALOG},rt=function(e){this.payload=e,this.type=t.AUTH_ACTIONS_TYPE.SEND_PASSWORD},nt=function(){this.type=t.AUTH_ACTIONS_TYPE.SEND_PASSWORD_SUCCESS},st=function(e){this.payload=e,this.type=t.AUTH_ACTIONS_TYPE.SEND_PASSWORD_FAILURE},it=function(){function t(t,e,o,r,n){this.images=t,this.traductions=e,this.styles=o,this.formBuilder=r,this.store=n,this.isPasswordBeingChanged$=this.store.pipe(s.select(x)),this.usernamePlaceholder="Username",this.passwordPlaceholder="Password",this.forgottenPassword="Forgot your password?",this.loginButtonTraduction="Log in",this.buttonsBackgroundColor="#3f51b5",this.buttonsColor="white"}return t.prototype.ngOnInit=function(){this.usernamePlaceholder=a.get(this.traductions||{},"form.usernamePlaceholder",this.usernamePlaceholder),this.passwordPlaceholder=a.get(this.traductions||{},"form.passwordPlaceholder",this.passwordPlaceholder),this.forgottenPassword=a.get(this.traductions||{},"buttons.passwordForgotten",this.forgottenPassword),this.loginButtonTraduction=a.get(this.traductions||{},"buttons.login",this.loginButtonTraduction),this.buttonsBackgroundColor=a.get(this.styles||{},"buttonsBackgroundColor",this.buttonsBackgroundColor),this.buttonsColor=a.get(this.styles||{},"buttonsColor",this.buttonsColor),this.userForm=this.formBuilder.group({username:["",i.Validators.required],password:["",i.Validators.required]})},t.prototype.openDialog=function(){this.store.dispatch(new ot)},t.prototype.onSubmit=function(){var t={username:this.userForm.value.username,password:this.userForm.value.password};this.store.dispatch(new q(t))},t.ctorParameters=function(){return[{type:void 0,decorators:[{type:e.Inject,args:[U]}]},{type:void 0,decorators:[{type:e.Inject,args:[C]}]},{type:void 0,decorators:[{type:e.Inject,args:[O]}]},{type:i.FormBuilder},{type:s.Store}]},t=T([e.Component({selector:"auth-lib-log-in",template:'<div id="container" [ngStyle]="{\'background-image\': \'url(\' + images.loginBackgroundImageUrl + \')\'}">\n  <mat-card class="mat-elevation-z8">\n    <img *ngIf="images.logoImageUrl && images.logoImageUrl.length >= 1" [src]="images.logoImageUrl">\n    <form [formGroup]="userForm" (ngSubmit)="onSubmit()">\n\n      <mat-form-field>\n        <input matInput [placeholder]="usernamePlaceholder" formControlName="username">\n      </mat-form-field>\n\n      <mat-form-field>\n          <input matInput type="password" [placeholder]="passwordPlaceholder" formControlName="password">\n      </mat-form-field>\n\n      <button \n        mat-raised-button\n        type="submit" \n        [disabled]="userForm.invalid"\n        *ngIf="!(isPasswordBeingChanged$ | async)"\n        [ngStyle]="{\n          \'background-color\': buttonsBackgroundColor,\n          \'color\': buttonsColor\n        }"\n      >\n        {{ loginButtonTraduction }}\n      </button>\n      <mat-spinner *ngIf="isPasswordBeingChanged$ | async" [diameter]="36"></mat-spinner>\n\n      <a (click)="openDialog()">{{ forgottenPassword }}</a>\n    </form>\n  </mat-card>\n</div>\n',styles:["#container{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100%;width:100%;flex:1;background-size:cover}#container mat-card{display:flex;flex-direction:column;justify-content:center;align-items:center;height:400px;width:400px;box-sizing:border-box;padding:2%}#container mat-card img{display:block;max-width:200px;max-height:100px;width:auto;height:auto;margin-bottom:20px}#container mat-card form{display:flex;flex:1;flex-direction:column;justify-content:center;align-items:center;width:100%}#container mat-card form mat-form-field{width:75%;font-size:16px}#container mat-card form a,#container mat-card form button,#container mat-card form mat-spinner{margin-top:20px}#container mat-card form a{cursor:pointer;color:#1e90ff;font-size:16px}"]}),_(0,e.Inject(U)),_(1,e.Inject(C)),_(2,e.Inject(O))],t)}(),at=function(){function t(t,e,o){this.store=t,this.traductions=e,this.styles=o,this.emailPlaceholder="Your email",this.sendButtonTraduction="Send",this.buttonsBackgroundColor="#3f51b5",this.buttonsColor="white"}return t.prototype.ngOnInit=function(){this.emailPlaceholder=a.get(this.traductions||{},"form.emailPlaceholder",this.emailPlaceholder),this.sendButtonTraduction=a.get(this.traductions||{},"buttons.send",this.sendButtonTraduction),this.buttonsBackgroundColor=a.get(this.styles||{},"buttonsBackgroundColor",this.buttonsBackgroundColor),this.buttonsColor=a.get(this.styles||{},"buttonsColor",this.buttonsColor)},t.prototype.send=function(){this.store.dispatch(new rt(this.emailInput.nativeElement.value))},t.ctorParameters=function(){return[{type:s.Store},{type:void 0,decorators:[{type:e.Inject,args:[C]}]},{type:void 0,decorators:[{type:e.Inject,args:[O]}]}]},T([e.ViewChild("email")],t.prototype,"emailInput",void 0),t=T([e.Component({selector:"auth-lib-forgotten-password",template:'<mat-form-field>\n  <input matInput [placeholder]="emailPlaceholder" #email>\n</mat-form-field>\n\n<button \n  mat-raised-button\n  type="button" \n  (click)="send()" \n  [disabled]="!(this.emailInput && this.emailInput.nativeElement && this.emailInput.nativeElement.value)"\n  [ngStyle]="{\n    \'background-color\': buttonsBackgroundColor,\n    \'color\': buttonsColor\n  }"\n>\n  {{ sendButtonTraduction }}\n</button>\n',styles:["mat-form-field{font-size:12px;margin-right:30px;width:230px}"]}),_(1,e.Inject(C)),_(2,e.Inject(O))],t)}(),ut=function(){function t(t,e,o,r,n){this.traductions=t,this.styles=e,this.dialogRef=o,this.formBuilder=r,this.store=n,this.usernamePlaceholder="Username",this.passwordPlaceholder="Password",this.firstNamePlaceholder="First name",this.lastNamePlaceholder="Last name",this.emailPlaceholder="Email",this.enterprisePlaceholder="Enterprise",this.signUpDialogTitle="Sign Up",this.signupButtonTraduction="Log in",this.buttonsBackgroundColor="#3f51b5",this.buttonsColor="white"}return t.prototype.ngOnInit=function(){this.usernamePlaceholder=a.get(this.traductions||{},"form.usernamePlaceholder",this.usernamePlaceholder),this.passwordPlaceholder=a.get(this.traductions||{},"form.passwordPlaceholder",this.passwordPlaceholder),this.firstNamePlaceholder=a.get(this.traductions||{},"form.firstNamePlaceholder",this.firstNamePlaceholder),this.lastNamePlaceholder=a.get(this.traductions||{},"form.lastNamePlaceholder",this.lastNamePlaceholder),this.emailPlaceholder=a.get(this.traductions||{},"form.emailPlaceholder",this.emailPlaceholder),this.enterprisePlaceholder=a.get(this.traductions||{},"form.enterprisePlaceholder",this.enterprisePlaceholder),this.signUpDialogTitle=a.get(this.traductions||{},"dialogs.signup",this.signUpDialogTitle),this.signupButtonTraduction=a.get(this.traductions||{},"buttons.signup",this.signupButtonTraduction),this.buttonsBackgroundColor=a.get(this.styles||{},"buttonsBackgroundColor",this.buttonsBackgroundColor),this.buttonsColor=a.get(this.styles||{},"buttonsColor",this.buttonsColor),this.userForm=this.formBuilder.group({username:["",i.Validators.required],password:["",i.Validators.required],firstName:["",i.Validators.required],lastName:["",i.Validators.required],email:["",i.Validators.required],enterprise:""})},t.prototype.onSubmit=function(){var t={username:this.userForm.value.username,password:this.userForm.value.password,firstName:this.userForm.value.firstName,lastName:this.userForm.value.lastName,email:this.userForm.value.email,enterprise:this.userForm.value.enterprise||null};this.store.dispatch(new M(t)),this.dialogRef.close()},t.ctorParameters=function(){return[{type:void 0,decorators:[{type:e.Inject,args:[C]}]},{type:void 0,decorators:[{type:e.Inject,args:[O]}]},{type:u.MatDialogRef},{type:i.FormBuilder},{type:s.Store}]},t=T([e.Component({selector:"auth-lib-sign-up",template:'<div id="container">\n    <h2 mat-dialog-title>{{ signUpDialogTitle }}</h2>\n    <form [formGroup]="userForm" (ngSubmit)="onSubmit()">\n\n        <div id="columns">\n            <div id="left-column">\n                <mat-form-field>\n                    <input matInput [placeholder]="usernamePlaceholder" formControlName="username" autocomplete="off">\n                </mat-form-field>\n                <mat-form-field>\n                    <input matInput [placeholder]="firstNamePlaceholder" formControlName="firstName" autocomplete="off">\n                </mat-form-field>\n                <mat-form-field>\n                    <input matInput [placeholder]="emailPlaceholder" formControlName="email" autocomplete="off">\n                </mat-form-field>\n            </div>\n\n            <div id="right-column">\n                <mat-form-field>\n                    <input matInput type="password" [placeholder]="passwordPlaceholder" formControlName="password" autocomplete="off">\n                </mat-form-field>\n                <mat-form-field>\n                    <input matInput [placeholder]="lastNamePlaceholder" formControlName="lastName" autocomplete="off">\n                </mat-form-field>\n                <mat-form-field>\n                    <input matInput [placeholder]="enterprisePlaceholder" formControlName="enterprise" autocomplete="off">\n                </mat-form-field>\n            </div>\n        </div>\n\n        <button mat-raised-button type="submit" [disabled]="userForm.invalid" [ngStyle]="{\n            \'background-color\': buttonsBackgroundColor,\n            \'color\': buttonsColor\n          }">\n            {{ signupButtonTraduction }}\n        </button>\n    </form>\n</div>\n',styles:["#container{display:flex;flex-direction:column;width:600px}#container form{margin-top:20px;display:flex;flex-direction:column;justify-content:space-between}#container form #columns{display:flex;flex-direction:row;justify-content:space-between}#container form #columns #left-column{margin-right:20px}#container form #columns #left-column,#container form #columns #right-column{display:flex;flex-direction:column;justify-content:space-between;width:100%}#container form #columns mat-form-field{width:100%}#container button{margin-top:20px;-ms-grid-row-align:center;align-self:center}"]}),_(0,e.Inject(C)),_(1,e.Inject(O))],t)}(),ct={isAuthenticated:!1,user:null,error:null,isPasswordBeingChanged:!1,usersList:null};function lt(e,o){switch(void 0===e&&(e=ct),o.type){case t.AUTH_ACTIONS_TYPE.SIGN_UP_FAILURE:return A(A({},e),{error:o.payload});case t.AUTH_ACTIONS_TYPE.LOG_IN_SUCCESS:return A(A({},e),{isAuthenticated:!0,user:o.payload.user,error:null,usersList:o.payload.usersList});case t.AUTH_ACTIONS_TYPE.LOG_IN_FAILURE:return A(A({},e),{error:o.payload});case t.AUTH_ACTIONS_TYPE.LOG_OUT:return ct;case t.AUTH_ACTIONS_TYPE.LOAD_USER_INFORMATION_SUCCESS:var r=A(A({},e.user),o.payload);return A(A({},e),{user:r});case t.AUTH_ACTIONS_TYPE.CHANGE_PASSWORD:case t.AUTH_ACTIONS_TYPE.SEND_PASSWORD:return A(A({},e),{isPasswordBeingChanged:!0});case t.AUTH_ACTIONS_TYPE.CHANGE_PASSWORD_SUCCESS:case t.AUTH_ACTIONS_TYPE.CHANGE_PASSWORD_FAILURE:case t.AUTH_ACTIONS_TYPE.SEND_PASSWORD_SUCCESS:case t.AUTH_ACTIONS_TYPE.SEND_PASSWORD_FAILURE:return A(A({},e),{isPasswordBeingChanged:!1});default:return e}}var pt=function(){function o(e,o,n,i,u,c,l,p){var d=this;this.resetActions=e,this.traductions=o,this.actions=n,this.authService=i,this.router=u,this.toastService=c,this.dialog=l,this.store=p,this.OpenSignUpDialog$=this.actions.pipe(m.ofType(t.AUTH_ACTIONS_TYPE.OPEN_SIGN_UP_DIALOG),r.tap((function(){return d.dialogRef=d.dialog.open(ut)}))),this.SignUp$=this.actions.pipe(m.ofType(t.AUTH_ACTIONS_TYPE.SIGN_UP),r.map((function(t){return t.payload})),r.switchMap((function(t){return d.authService.createUser(t).pipe(r.map((function(){return new $})),r.catchError((function(t){return S.of(new W(t))})))}))),this.SignUpSuccess$=this.actions.pipe(m.ofType(t.AUTH_ACTIONS_TYPE.SIGN_UP_SUCCESS),r.tap((function(){d.toastService.success(a.get(d.traductions||{},"messages.signupSuccess","Your account has been created!"))}))),this.SignUpFailure$=this.actions.pipe(m.ofType(t.AUTH_ACTIONS_TYPE.SIGN_UP_FAILURE),r.tap((function(t){return d.toastService.error(a.get(d.traductions||{},"messages.signupFailure","Please try again with a new username."))}))),this.LogIn$=this.actions.pipe(m.ofType(t.AUTH_ACTIONS_TYPE.LOG_IN),r.map((function(t){return t.payload})),r.switchMap((function(t){return d.authService.login(t).pipe(r.concatMap((function(t){return sessionStorage.setItem("token",t.token.token),d.authService.getUserInformation().pipe(r.map((function(t){var e=t.user,o=t.usersList;return new V({user:e,usersList:o})})),r.catchError((function(t){return S.of(new z(t))})))})),r.catchError((function(t){return S.of(new z(t))})))}))),this.LogInSuccess$=this.actions.pipe(m.ofType(t.AUTH_ACTIONS_TYPE.LOG_IN_SUCCESS),r.withLatestFrom(this.store.pipe(s.select(D))),r.tap((function(t){var e=I(t,2),o=(e[0],e[1]),r=sessionStorage.getItem("redirectedUrlAfterLogIn");r?(d.router.navigateByUrl(r),sessionStorage.removeItem("redirectedUrlAfterLogIn")):d.router.navigateByUrl(o.redirectUrlAfterLogin),d.toastService.success(a.get(d.traductions||{},"messages.loginSuccess","Hi! Nice to see you again!"))}))),this.LogInFailure$=this.actions.pipe(m.ofType(t.AUTH_ACTIONS_TYPE.LOG_IN_FAILURE),r.tap((function(t){return d.toastService.error(a.get(d.traductions||{},"messages.loginFailure","Wrong credentials. Please check again."))}))),this.LogOut$=this.actions.pipe(m.ofType(t.AUTH_ACTIONS_TYPE.LOG_OUT),r.switchMap((function(t){return sessionStorage.removeItem("token"),d.router.navigate(["log-in"]),(d.resetActions||[]).map((function(t){return new t}))}))),this.LoadUserInformation$=this.actions.pipe(m.ofType(t.AUTH_ACTIONS_TYPE.LOAD_USER_INFORMATION),r.switchMap((function(t){return d.authService.getUserInformation().pipe(r.map((function(t){var e=t.user;t.usersList;return new Q(e)})),r.catchError((function(t){return S.of(new X(t))})))}))),this.ChangePassword$=this.actions.pipe(m.ofType(t.AUTH_ACTIONS_TYPE.CHANGE_PASSWORD),r.switchMap((function(t){return d.authService.changePassword(t.payload).pipe(r.map((function(){return new tt})),r.catchError((function(t){return S.of(new et(t))})))}))),this.ChangePasswordSuccess$=this.actions.pipe(m.ofType(t.AUTH_ACTIONS_TYPE.CHANGE_PASSWORD_SUCCESS),r.tap((function(){return d.toastService.success(a.get(d.traductions||{},"messages.changePasswordSuccess","Your password has been successfully changed!"))}))),this.ChangePasswordFailure$=this.actions.pipe(m.ofType(t.AUTH_ACTIONS_TYPE.CHANGE_PASSWORD_FAILURE),r.tap((function(t){return d.toastService.error(a.get(d.traductions||{},"messages.changePasswordFailure","Wrong current password. Please try again."))}))),this.OpenForgottenPasswordDialog$=this.actions.pipe(m.ofType(t.AUTH_ACTIONS_TYPE.OPEN_FORGOTTEN_PASSWORD_DIALOG),r.tap((function(){return d.dialogRef=d.dialog.open(at)}))),this.SendPassword$=this.actions.pipe(m.ofType(t.AUTH_ACTIONS_TYPE.SEND_PASSWORD),r.tap((function(){d.dialogRef.close()})),r.switchMap((function(t){return d.authService.sendPassword(t.payload).pipe(r.map((function(){return new nt})),r.catchError((function(t){return S.of(new st(t))})))}))),this.SendPasswordSuccess$=this.actions.pipe(m.ofType(t.AUTH_ACTIONS_TYPE.SEND_PASSWORD_SUCCESS),r.tap((function(){return d.toastService.success(a.get(d.traductions||{},"messages.passwordResetSuccess","An email for resetting your password has been sent to your address."))}))),this.SendPasswordFailure$=this.actions.pipe(m.ofType(t.AUTH_ACTIONS_TYPE.SEND_PASSWORD_FAILURE),r.tap((function(){return d.toastService.error(a.get(d.traductions||{},"messages.passwordResetFailure","An error occured. Please try again."))})))}return o.ctorParameters=function(){return[{type:Array,decorators:[{type:e.Inject,args:[E]}]},{type:void 0,decorators:[{type:e.Inject,args:[C]}]},{type:m.Actions},{type:N},{type:n.Router},{type:g.ToastrService},{type:u.MatDialog},{type:s.Store}]},T([m.Effect({dispatch:!1})],o.prototype,"OpenSignUpDialog$",void 0),T([m.Effect()],o.prototype,"SignUp$",void 0),T([m.Effect({dispatch:!1})],o.prototype,"SignUpSuccess$",void 0),T([m.Effect({dispatch:!1})],o.prototype,"SignUpFailure$",void 0),T([m.Effect()],o.prototype,"LogIn$",void 0),T([m.Effect({dispatch:!1})],o.prototype,"LogInSuccess$",void 0),T([m.Effect({dispatch:!1})],o.prototype,"LogInFailure$",void 0),T([m.Effect()],o.prototype,"LogOut$",void 0),T([m.Effect()],o.prototype,"LoadUserInformation$",void 0),T([m.Effect()],o.prototype,"ChangePassword$",void 0),T([m.Effect({dispatch:!1})],o.prototype,"ChangePasswordSuccess$",void 0),T([m.Effect({dispatch:!1})],o.prototype,"ChangePasswordFailure$",void 0),T([m.Effect({dispatch:!1})],o.prototype,"OpenForgottenPasswordDialog$",void 0),T([m.Effect()],o.prototype,"SendPassword$",void 0),T([m.Effect({dispatch:!1})],o.prototype,"SendPasswordSuccess$",void 0),T([m.Effect({dispatch:!1})],o.prototype,"SendPasswordFailure$",void 0),o=T([e.Injectable(),_(0,e.Inject(E)),_(1,e.Inject(C))],o)}(),dt=function(){function t(){}var r;return r=t,t.forRoot=function(t){return{ngModule:r,providers:[{provide:y,useValue:t.urls},{provide:U,useValue:t.images},{provide:C,useValue:t.traductions},{provide:E,useValue:t.resetActions},{provide:O,useValue:t.styles},{provide:o.HTTP_INTERCEPTORS,useClass:Y,multi:!0}]}},t=r=T([e.NgModule({declarations:[it,at,ut],imports:[c.CommonModule,o.HttpClientModule,n.RouterModule,i.ReactiveFormsModule,s.StoreModule.forFeature("auth",lt),m.EffectsModule.forFeature([pt]),f.BrowserAnimationsModule,p.MatCardModule,u.MatDialogModule,d.MatButtonModule,l.MatInputModule,h.MatProgressSpinnerModule,g.ToastrModule.forRoot({timeOut:3e3,positionClass:"toast-bottom-right",preventDuplicates:!0})],entryComponents:[at],exports:[it,at],providers:[G]})],t)}();t.AUTH_API_URLS=y,t.AUTH_IMAGES_URLS=U,t.AUTH_RESET_ACTIONS=E,t.AUTH_STYLES=O,t.AUTH_TRADUCTIONS=C,t.AuthGuard=G,t.AuthModule=dt,t.AuthService=N,t.ChangePassword=Z,t.ChangePasswordFailure=et,t.ChangePasswordSuccess=tt,t.ForgottenPasswordComponent=at,t.LoadUserInformation=K,t.LoadUserInformationFailure=X,t.LoadUserInformationSuccess=Q,t.LogIn=q,t.LogInComponent=it,t.LogInFailure=z,t.LogInSuccess=V,t.LogOut=J,t.OpenForgottenPasswordDialog=ot,t.OpenSignUpDialog=B,t.SendPassword=rt,t.SendPasswordFailure=st,t.SendPasswordSuccess=nt,t.SignUp=M,t.SignUpComponent=ut,t.SignUpFailure=W,t.SignUpSuccess=$,t.TokenInterceptor=Y,t.authReducer=lt,t.initialState=ct,t.selectAuthState=w,t.selectIsAuthenticated=b,t.selectIsPasswordBeingChanged=x,t.selectLogInError=R,t.selectUser=D,t.selectUsersList=j,t.ɵ0=v,t.ɵ1=L,t.ɵ2=F,t.ɵ3=H,t.ɵ4=k,t.ɵa=pt,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=angular-auth-lib.umd.min.js.map